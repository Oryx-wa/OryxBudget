<div materialize class="">
  <div class="">
    <div *ngIf="!noLines;else upload">
      <div materialize class="col l4 left">
        <nav *ngIf="linesTouched$ | async">
          <div materialize class="nav-wrapper white">
            <ul id="nav-mobile" class="right hide-on-med-and-down">
              <li>
                <a class="btn waves-effect waves-light" (click)="UpdateStatus('update')">Save</a></li>
              <li>
                <a class="btn waves-effect waves-light" (click)="UpdateStatus('reset')">Reset</a></li>
            </ul>
          </div>
        </nav>
      </div>
      <ag-grid-angular style="width: 100%; height: 450px;" class="ag-material" [gridOptions]="gridOptions" [columnDefs]="columnDefs"
        groupHeaders rowHeight="48" rowSelection="single" (gridReady)="onReady($event)" [rowData]="rowData">
      </ag-grid-angular>
    </div>
    <ng-template #upload>
      <app-fileuploader [data]="data" [url]="uploadUrl" [title]="uploadTitle">
      </app-fileuploader>
    </ng-template>
  </div>
  <div class="" *ngIf="showComment === true">
    <app-dialog *ngIf="line$ | async; let line;" [(visible)]="showComment">
      <div class="col s1"></div>
      <div class="col s10">
        <div class="row">
          <ul materialize="tabs" [materializeParams]="tabSelectionParams" class="tabs  z-depth-1  teal accent-4 ">
            <li class="tab col s3 l3">
              <a (click)="changeDialog('actual')" class="white-text waves-effect waves-light"> Actuals </a>
            </li>
            <li class="tab col s3 l3">
              <a (click)="changeDialog('details')" class="white-text waves-effect waves-light"> Details </a>
            </li>
            <li class="tab col s3 l3">
              <a (click)="changeDialog('comments')" class="white-text waves-effect waves-light"> Comments </a>
            </li>
            <li class="tab col s3 l3">
              <a (click)="changeDialog('attachments')" class="white-text waves-effect waves-light"> Attachments </a>
            </li>
          </ul>
        </div>
        <div class="row">
          <div class="col s2 ">
            <h6 class="right-align"> Code: </h6>
          </div>
          <div class="col s2">
            <h6>{{line.code}}</h6>
          </div>
          <div class="col s2 ">
            <h6 class="right-align"> Description: </h6>
          </div>
          <div class="col s6">
            <h6>{{line.description}}</h6>
          </div>
        </div>

        <div *ngIf="dialogMode === 'details'">
          <app-line-comment [line]="line" [lineComments]="lineComments"   (update)="updateComments($event)"
            (close)="showComment = !showComment" [showSubCom]="showSubCom" [showTecCom]="showTecCom" [showMalCom]="showMalCom"
            [napims]="napims" [operator]="operator">
          </app-line-comment>
        </div>
        <div *ngIf="dialogMode ==='comments'">
          <app-comments [lineComments]="lineComments" (update)="newComment($event)" (close)="showComment = !showComment" 
            [napims]="napims" [operator]="operator"> </app-comments>
        </div>
        <div *ngIf="dialogMode ==='attachments'">
          <app-attachment> </app-attachment>
        </div>

      </div>
      <div class="col s1"></div>




      <!--<button (click)="showComment = !showComment" class="wave-effect wave-light btn ">Close</button>-->
    </app-dialog>
  </div>
</div>